import{S as Y,i as Z,s as ee,e as V,j as S,k as x,t as U,c as $,a as D,m as F,n as k,g as A,d as y,b as d,f as B,o as H,E as v,a2 as J,x as w,u as E,v as K,F as Q,_ as se,l as te,r as oe,w as ie,a0 as M,a1 as O}from"../../chunks/vendor-894bca97.js";import{D as R}from"../../chunks/defaults-provider-d622454b.js";import{V as W}from"../../chunks/vector-input-c960c268.js";import{a as le}from"../../chunks/angle-calculator-72fac1a5.js";import"../../chunks/custom-math-d14d206d.js";function ce(n,e){return{x:n.y*e.z-n.z*e.y,y:n.x*e.z-n.z*e.x,z:n.y*e.x-n.x*e.y}}class ue{convertToCoordinate(e){const t=ce(e.rVector,e.sVector),i=le(t,e.startVector);return{x:t.x,y:t.y,z:t.z,result:i}}convertToParameter(e){const t=this.getLayerVectors(e);return{startVector:t[0],rVector:t[1],sVector:t[2]}}fixNaNInfinity(e){const t=new R().getGeoLayerParameterDefault();for(const i in e){const a=new R().getVectorDefault();for(const s in e[i]){const r=e[i][s];!Number.isNaN(r)&&Number.isFinite(r)&&(a[s]=r),t[i]=a}}return t}getLayerVectors(e){return[{x:e.result/e.x,y:0,z:0},{x:0,y:e.result/e.y,z:0},{x:0,y:0,z:e.result/e.z}]}}function re(n){let e,t,i,a,s,r,p,g,b,P,m,L,l,c,o,h;function I(_){n[4](_)}let C={};n[0].startVector!==void 0&&(C.vector=n[0].startVector),t=new W({props:C}),M.push(()=>O(t,"vector",I));function q(_){n[5](_)}let z={};n[0].rVector!==void 0&&(z.vector=n[0].rVector),g=new W({props:z}),M.push(()=>O(g,"vector",q));function T(_){n[6](_)}let j={};return n[0].sVector!==void 0&&(j.vector=n[0].sVector),c=new W({props:j}),M.push(()=>O(c,"vector",T)),{c(){e=V("div"),S(t.$$.fragment),a=x(),s=V("div"),r=U("+r"),p=x(),S(g.$$.fragment),P=x(),m=V("div"),L=U("+s"),l=x(),S(c.$$.fragment),this.h()},l(_){e=$(_,"DIV",{class:!0});var u=D(e);F(t.$$.fragment,u),a=k(u),s=$(u,"DIV",{class:!0});var f=D(s);r=A(f,"+r"),f.forEach(y),p=k(u),F(g.$$.fragment,u),P=k(u),m=$(u,"DIV",{class:!0});var N=D(m);L=A(N,"+s"),N.forEach(y),l=k(u),F(c.$$.fragment,u),u.forEach(y),this.h()},h(){d(s,"class","text svelte-1x3x17s"),d(m,"class","text svelte-1x3x17s"),d(e,"class","geo-layer svelte-1x3x17s")},m(_,u){B(_,e,u),H(t,e,null),v(e,a),v(e,s),v(s,r),v(e,p),H(g,e,null),v(e,P),v(e,m),v(m,L),v(e,l),H(c,e,null),h=!0},p(_,u){const f={};!i&&u&1&&(i=!0,f.vector=_[0].startVector,J(()=>i=!1)),t.$set(f);const N={};!b&&u&1&&(b=!0,N.vector=_[0].rVector,J(()=>b=!1)),g.$set(N);const G={};!o&&u&1&&(o=!0,G.vector=_[0].sVector,J(()=>o=!1)),c.$set(G)},i(_){h||(w(t.$$.fragment,_),w(g.$$.fragment,_),w(c.$$.fragment,_),h=!0)},o(_){E(t.$$.fragment,_),E(g.$$.fragment,_),E(c.$$.fragment,_),h=!1},d(_){_&&y(e),K(t),K(g),K(c)}}}function ae(n){let e,t,i,a,s,r,p,g,b,P,m,L,l,c,o,h,I,C,q,z,T,j,_;return{c(){e=V("div"),t=V("input"),a=x(),s=V("div"),r=U("x +"),p=x(),g=V("input"),P=x(),m=V("div"),L=U("y +"),l=x(),c=V("input"),h=x(),I=V("div"),C=U("z ="),q=x(),z=V("input"),this.h()},l(u){e=$(u,"DIV",{class:!0});var f=D(e);t=$(f,"INPUT",{type:!0,class:!0}),a=k(f),s=$(f,"DIV",{class:!0});var N=D(s);r=A(N,"x +"),N.forEach(y),p=k(f),g=$(f,"INPUT",{type:!0,class:!0}),P=k(f),m=$(f,"DIV",{class:!0});var G=D(m);L=A(G,"y +"),G.forEach(y),l=k(f),c=$(f,"INPUT",{type:!0,class:!0}),h=k(f),I=$(f,"DIV",{class:!0});var X=D(I);C=A(X,"z ="),X.forEach(y),q=k(f),z=$(f,"INPUT",{type:!0,class:!0}),f.forEach(y),this.h()},h(){d(t,"type","number"),t.value=i=n[2].x,d(t,"class","svelte-1x3x17s"),d(s,"class","text-sm svelte-1x3x17s"),d(g,"type","number"),g.value=b=n[2].y,d(g,"class","svelte-1x3x17s"),d(m,"class","text-sm svelte-1x3x17s"),d(c,"type","number"),c.value=o=n[2].z,d(c,"class","svelte-1x3x17s"),d(I,"class","text-sm svelte-1x3x17s"),d(z,"type","number"),z.value=T=n[2].result,d(z,"class","svelte-1x3x17s"),d(e,"class","geo-layer svelte-1x3x17s")},m(u,f){B(u,e,f),v(e,t),v(e,a),v(e,s),v(s,r),v(e,p),v(e,g),v(e,P),v(e,m),v(m,L),v(e,l),v(e,c),v(e,h),v(e,I),v(I,C),v(e,q),v(e,z),j||(_=[Q(t,"change",n[7]),Q(g,"change",n[8]),Q(c,"change",n[9]),Q(z,"change",n[10])],j=!0)},p(u,f){f&4&&i!==(i=u[2].x)&&(t.value=i),f&4&&b!==(b=u[2].y)&&(g.value=b),f&4&&o!==(o=u[2].z)&&(c.value=o),f&4&&T!==(T=u[2].result)&&(z.value=T)},d(u){u&&y(e),j=!1,se(_)}}}function fe(n){let e,t,i,a=n[1]==="parameter"&&re(n),s=n[1]==="coordinate"&&ae(n);return{c(){a&&a.c(),e=x(),s&&s.c(),t=te()},l(r){a&&a.l(r),e=k(r),s&&s.l(r),t=te()},m(r,p){a&&a.m(r,p),B(r,e,p),s&&s.m(r,p),B(r,t,p),i=!0},p(r,[p]){r[1]==="parameter"?a?(a.p(r,p),p&2&&w(a,1)):(a=re(r),a.c(),w(a,1),a.m(e.parentNode,e)):a&&(oe(),E(a,1,1,()=>{a=null}),ie()),r[1]==="coordinate"?s?s.p(r,p):(s=ae(r),s.c(),s.m(t.parentNode,t)):s&&(s.d(1),s=null)},i(r){i||(w(a),i=!0)},o(r){E(a),i=!1},d(r){a&&a.d(r),r&&y(e),s&&s.d(r),r&&y(t)}}}function pe(n,e,t){let{type:i}=e,{geoLayerParameter:a}=e;const s=new ue;let r=new R().getGeoLayerCoordinateDefault();function p(o,h){const I=o.target.value;t(2,r[h]=+I,r),t(0,a=s.fixNaNInfinity(s.convertToParameter(r)))}function g(o){n.$$.not_equal(a.startVector,o)&&(a.startVector=o,t(0,a))}function b(o){n.$$.not_equal(a.rVector,o)&&(a.rVector=o,t(0,a))}function P(o){n.$$.not_equal(a.sVector,o)&&(a.sVector=o,t(0,a))}const m=o=>p(o,"x"),L=o=>p(o,"y"),l=o=>p(o,"z"),c=o=>p(o,"result");return n.$$set=o=>{"type"in o&&t(1,i=o.type),"geoLayerParameter"in o&&t(0,a=o.geoLayerParameter)},[a,i,r,p,g,b,P,m,L,l,c]}class ne extends Y{constructor(e){super();Z(this,e,pe,fe,ee,{type:1,geoLayerParameter:0})}}function _e(n){let e,t,i,a,s,r,p,g;function b(l){n[1](l)}let P={type:"parameter"};n[0]!==void 0&&(P.geoLayerParameter=n[0]),i=new ne({props:P}),M.push(()=>O(i,"geoLayerParameter",b));function m(l){n[2](l)}let L={type:"coordinate"};return n[0]!==void 0&&(L.geoLayerParameter=n[0]),r=new ne({props:L}),M.push(()=>O(r,"geoLayerParameter",m)),{c(){e=V("div"),t=V("div"),S(i.$$.fragment),s=x(),S(r.$$.fragment),this.h()},l(l){e=$(l,"DIV",{class:!0});var c=D(e);t=$(c,"DIV",{class:!0});var o=D(t);F(i.$$.fragment,o),s=k(o),F(r.$$.fragment,o),o.forEach(y),c.forEach(y),this.h()},h(){d(t,"class","container svelte-gfbpd4"),d(e,"class","centered")},m(l,c){B(l,e,c),v(e,t),H(i,t,null),v(t,s),H(r,t,null),g=!0},p(l,[c]){const o={};!a&&c&1&&(a=!0,o.geoLayerParameter=l[0],J(()=>a=!1)),i.$set(o);const h={};!p&&c&1&&(p=!0,h.geoLayerParameter=l[0],J(()=>p=!1)),r.$set(h)},i(l){g||(w(i.$$.fragment,l),w(r.$$.fragment,l),g=!0)},o(l){E(i.$$.fragment,l),E(r.$$.fragment,l),g=!1},d(l){l&&y(e),K(i),K(r)}}}function ve(n,e,t){let i=new R().getGeoLayerParameterDefault();function a(r){i=r,t(0,i)}function s(r){i=r,t(0,i)}return[i,a,s]}class Ve extends Y{constructor(e){super();Z(this,e,ve,_e,ee,{})}}export{Ve as default};
