import{S as re,i as ae,s as ne,e as V,j as U,k as x,t as j,c as $,a as N,m as F,n as z,g as J,d as y,b as d,f as B,o as K,J as v,Y as W,x as w,u as E,v as X,K as H,E as se,l as R,r as oe,w as ie,W as Y,X as A}from"../../chunks/index-7d9d2a1b.js";import{D as M}from"../../chunks/defaults-provider-d622454b.js";import{V as O}from"../../chunks/vector-input-c3a2c8d1.js";import{a as le}from"../../chunks/angle-calculator-149e2b17.js";import"../../chunks/custom-math-d14d206d.js";function ue(n,e){return{x:n.y*e.z-n.z*e.y,y:n.x*e.z-n.z*e.x,z:n.y*e.x-n.x*e.y}}class ce{convertToCoordinate(e){const t=ue(e.rVector,e.sVector),i=le(t,e.startVector);return{x:t.x,y:t.y,z:t.z,result:i}}convertToParameter(e){const t=this.getLayerVectors(e);return{startVector:t[0],rVector:t[1],sVector:t[2]}}fixNaNInfinity(e){const t=new M().getGeoLayerParameterDefault();for(const i in e){const a=new M().getVectorDefault();for(const s in e[i]){const r=e[i][s];!Number.isNaN(r)&&Number.isFinite(r)&&(a[s]=r),t[i]=a}}return t}getLayerVectors(e){return[{x:e.result/e.x,y:0,z:0},{x:0,y:e.result/e.y,z:0},{x:0,y:0,z:e.result/e.z}]}}function Z(n){let e,t,i,a,s,r,p,g,b,P,m,L,l,u,o,h;function D(_){n[4](_)}let C={};n[0].startVector!==void 0&&(C.vector=n[0].startVector),t=new O({props:C}),Y.push(()=>A(t,"vector",D));function G(_){n[5](_)}let I={};n[0].rVector!==void 0&&(I.vector=n[0].rVector),g=new O({props:I}),Y.push(()=>A(g,"vector",G));function T(_){n[6](_)}let q={};return n[0].sVector!==void 0&&(q.vector=n[0].sVector),u=new O({props:q}),Y.push(()=>A(u,"vector",T)),{c(){e=V("div"),U(t.$$.fragment),a=x(),s=V("div"),r=j("+r"),p=x(),U(g.$$.fragment),P=x(),m=V("div"),L=j("+s"),l=x(),U(u.$$.fragment),this.h()},l(_){e=$(_,"DIV",{class:!0});var c=N(e);F(t.$$.fragment,c),a=z(c),s=$(c,"DIV",{class:!0});var f=N(s);r=J(f,"+r"),f.forEach(y),p=z(c),F(g.$$.fragment,c),P=z(c),m=$(c,"DIV",{class:!0});var k=N(m);L=J(k,"+s"),k.forEach(y),l=z(c),F(u.$$.fragment,c),c.forEach(y),this.h()},h(){d(s,"class","text svelte-1x3x17s"),d(m,"class","text svelte-1x3x17s"),d(e,"class","geo-layer svelte-1x3x17s")},m(_,c){B(_,e,c),K(t,e,null),v(e,a),v(e,s),v(s,r),v(e,p),K(g,e,null),v(e,P),v(e,m),v(m,L),v(e,l),K(u,e,null),h=!0},p(_,c){const f={};!i&&c&1&&(i=!0,f.vector=_[0].startVector,W(()=>i=!1)),t.$set(f);const k={};!b&&c&1&&(b=!0,k.vector=_[0].rVector,W(()=>b=!1)),g.$set(k);const S={};!o&&c&1&&(o=!0,S.vector=_[0].sVector,W(()=>o=!1)),u.$set(S)},i(_){h||(w(t.$$.fragment,_),w(g.$$.fragment,_),w(u.$$.fragment,_),h=!0)},o(_){E(t.$$.fragment,_),E(g.$$.fragment,_),E(u.$$.fragment,_),h=!1},d(_){_&&y(e),X(t),X(g),X(u)}}}function ee(n){let e,t,i,a,s,r,p,g,b,P,m,L,l,u,o,h,D,C,G,I,T,q,_;return{c(){e=V("div"),t=V("input"),a=x(),s=V("div"),r=j("x +"),p=x(),g=V("input"),P=x(),m=V("div"),L=j("y +"),l=x(),u=V("input"),h=x(),D=V("div"),C=j("z ="),G=x(),I=V("input"),this.h()},l(c){e=$(c,"DIV",{class:!0});var f=N(e);t=$(f,"INPUT",{type:!0,class:!0}),a=z(f),s=$(f,"DIV",{class:!0});var k=N(s);r=J(k,"x +"),k.forEach(y),p=z(f),g=$(f,"INPUT",{type:!0,class:!0}),P=z(f),m=$(f,"DIV",{class:!0});var S=N(m);L=J(S,"y +"),S.forEach(y),l=z(f),u=$(f,"INPUT",{type:!0,class:!0}),h=z(f),D=$(f,"DIV",{class:!0});var Q=N(D);C=J(Q,"z ="),Q.forEach(y),G=z(f),I=$(f,"INPUT",{type:!0,class:!0}),f.forEach(y),this.h()},h(){d(t,"type","number"),t.value=i=n[2].x,d(t,"class","svelte-1x3x17s"),d(s,"class","text-sm svelte-1x3x17s"),d(g,"type","number"),g.value=b=n[2].y,d(g,"class","svelte-1x3x17s"),d(m,"class","text-sm svelte-1x3x17s"),d(u,"type","number"),u.value=o=n[2].z,d(u,"class","svelte-1x3x17s"),d(D,"class","text-sm svelte-1x3x17s"),d(I,"type","number"),I.value=T=n[2].result,d(I,"class","svelte-1x3x17s"),d(e,"class","geo-layer svelte-1x3x17s")},m(c,f){B(c,e,f),v(e,t),v(e,a),v(e,s),v(s,r),v(e,p),v(e,g),v(e,P),v(e,m),v(m,L),v(e,l),v(e,u),v(e,h),v(e,D),v(D,C),v(e,G),v(e,I),q||(_=[H(t,"change",n[7]),H(g,"change",n[8]),H(u,"change",n[9]),H(I,"change",n[10])],q=!0)},p(c,f){f&4&&i!==(i=c[2].x)&&(t.value=i),f&4&&b!==(b=c[2].y)&&(g.value=b),f&4&&o!==(o=c[2].z)&&(u.value=o),f&4&&T!==(T=c[2].result)&&(I.value=T)},d(c){c&&y(e),q=!1,se(_)}}}function fe(n){let e,t,i,a=n[1]==="parameter"&&Z(n),s=n[1]==="coordinate"&&ee(n);return{c(){a&&a.c(),e=x(),s&&s.c(),t=R()},l(r){a&&a.l(r),e=z(r),s&&s.l(r),t=R()},m(r,p){a&&a.m(r,p),B(r,e,p),s&&s.m(r,p),B(r,t,p),i=!0},p(r,[p]){r[1]==="parameter"?a?(a.p(r,p),p&2&&w(a,1)):(a=Z(r),a.c(),w(a,1),a.m(e.parentNode,e)):a&&(oe(),E(a,1,1,()=>{a=null}),ie()),r[1]==="coordinate"?s?s.p(r,p):(s=ee(r),s.c(),s.m(t.parentNode,t)):s&&(s.d(1),s=null)},i(r){i||(w(a),i=!0)},o(r){E(a),i=!1},d(r){a&&a.d(r),r&&y(e),s&&s.d(r),r&&y(t)}}}function pe(n,e,t){let{type:i}=e,{geoLayerParameter:a}=e;const s=new ce;let r=new M().getGeoLayerCoordinateDefault();function p(o,h){const D=o.target.value;t(2,r[h]=+D,r),t(0,a=s.fixNaNInfinity(s.convertToParameter(r)))}function g(o){n.$$.not_equal(a.startVector,o)&&(a.startVector=o,t(0,a))}function b(o){n.$$.not_equal(a.rVector,o)&&(a.rVector=o,t(0,a))}function P(o){n.$$.not_equal(a.sVector,o)&&(a.sVector=o,t(0,a))}const m=o=>p(o,"x"),L=o=>p(o,"y"),l=o=>p(o,"z"),u=o=>p(o,"result");return n.$$set=o=>{"type"in o&&t(1,i=o.type),"geoLayerParameter"in o&&t(0,a=o.geoLayerParameter)},[a,i,r,p,g,b,P,m,L,l,u]}class te extends re{constructor(e){super(),ae(this,e,pe,fe,ne,{type:1,geoLayerParameter:0})}}function _e(n){let e,t,i,a,s,r,p,g;function b(l){n[1](l)}let P={type:"parameter"};n[0]!==void 0&&(P.geoLayerParameter=n[0]),i=new te({props:P}),Y.push(()=>A(i,"geoLayerParameter",b));function m(l){n[2](l)}let L={type:"coordinate"};return n[0]!==void 0&&(L.geoLayerParameter=n[0]),r=new te({props:L}),Y.push(()=>A(r,"geoLayerParameter",m)),{c(){e=V("div"),t=V("div"),U(i.$$.fragment),s=x(),U(r.$$.fragment),this.h()},l(l){e=$(l,"DIV",{class:!0});var u=N(e);t=$(u,"DIV",{class:!0});var o=N(t);F(i.$$.fragment,o),s=z(o),F(r.$$.fragment,o),o.forEach(y),u.forEach(y),this.h()},h(){d(t,"class","container svelte-gfbpd4"),d(e,"class","centered")},m(l,u){B(l,e,u),v(e,t),K(i,t,null),v(t,s),K(r,t,null),g=!0},p(l,[u]){const o={};!a&&u&1&&(a=!0,o.geoLayerParameter=l[0],W(()=>a=!1)),i.$set(o);const h={};!p&&u&1&&(p=!0,h.geoLayerParameter=l[0],W(()=>p=!1)),r.$set(h)},i(l){g||(w(i.$$.fragment,l),w(r.$$.fragment,l),g=!0)},o(l){E(i.$$.fragment,l),E(r.$$.fragment,l),g=!1},d(l){l&&y(e),X(i),X(r)}}}function ve(n,e,t){let i=new M().getGeoLayerParameterDefault();function a(r){i=r,t(0,i)}function s(r){i=r,t(0,i)}return[i,a,s]}class Ve extends re{constructor(e){super(),ae(this,e,ve,_e,ne,{})}}export{Ve as default};
