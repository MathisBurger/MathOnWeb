import{S as re,i as ae,s as ne,e as $,k as U,l as z,t as F,a as b,b as N,n as j,o as I,h as K,d as y,f as d,g as M,p as Z,K as m,$ as A,y as w,v as E,w as B,L as O,F as se,m as X,u as oe,x as ie,Z as H,_ as J}from"../../chunks/index-81c2a6a4.js";import{D as Q}from"../../chunks/defaults-provider-d622454b.js";import{V as R}from"../../chunks/vector-input-cd83b917.js";import{a as le}from"../../chunks/angle-calculator-149e2b17.js";import"../../chunks/tooltip-695cd802.js";import"../../chunks/theme-68f09822.js";import"../../chunks/index-c120acd1.js";import"../../chunks/custom-math-d14d206d.js";function ue(n,e){return{x:n.y*e.z-n.z*e.y,y:n.x*e.z-n.z*e.x,z:n.y*e.x-n.x*e.y}}class ce{convertToCoordinate(e){const t=ue(e.rVector,e.sVector),i=le(t,e.startVector);return{x:t.x,y:t.y,z:t.z,result:i}}convertToParameter(e){const t=this.getLayerVectors(e);return{startVector:t[0],rVector:t[1],sVector:t[2]}}fixNaNInfinity(e){const t=new Q().getGeoLayerParameterDefault();for(const i in e){const a=new Q().getVectorDefault();for(const s in e[i]){const r=e[i][s];!Number.isNaN(r)&&Number.isFinite(r)&&(a[s]=r),t[i]=a}}return t}getLayerVectors(e){return[{x:e.result/e.x,y:0,z:0},{x:0,y:e.result/e.y,z:0},{x:0,y:0,z:e.result/e.z}]}}function Y(n){let e,t,i,a,s,r,p,_,h,P,g,L,u,l,o,V;function D(v){n[4](v)}let T={};n[0].startVector!==void 0&&(T.vector=n[0].startVector),t=new R({props:T}),H.push(()=>J(t,"vector",D));function G(v){n[5](v)}let x={};n[0].rVector!==void 0&&(x.vector=n[0].rVector),_=new R({props:x}),H.push(()=>J(_,"vector",G));function C(v){n[6](v)}let q={};return n[0].sVector!==void 0&&(q.vector=n[0].sVector),l=new R({props:q}),H.push(()=>J(l,"vector",C)),{c(){e=$("div"),U(t.$$.fragment),a=z(),s=$("div"),r=F("+r"),p=z(),U(_.$$.fragment),P=z(),g=$("div"),L=F("+s"),u=z(),U(l.$$.fragment),this.h()},l(v){e=b(v,"DIV",{class:!0});var c=N(e);j(t.$$.fragment,c),a=I(c),s=b(c,"DIV",{class:!0});var f=N(s);r=K(f,"+r"),f.forEach(y),p=I(c),j(_.$$.fragment,c),P=I(c),g=b(c,"DIV",{class:!0});var k=N(g);L=K(k,"+s"),k.forEach(y),u=I(c),j(l.$$.fragment,c),c.forEach(y),this.h()},h(){d(s,"class","text svelte-1x3x17s"),d(g,"class","text svelte-1x3x17s"),d(e,"class","geo-layer svelte-1x3x17s")},m(v,c){M(v,e,c),Z(t,e,null),m(e,a),m(e,s),m(s,r),m(e,p),Z(_,e,null),m(e,P),m(e,g),m(g,L),m(e,u),Z(l,e,null),V=!0},p(v,c){const f={};!i&&c&1&&(i=!0,f.vector=v[0].startVector,A(()=>i=!1)),t.$set(f);const k={};!h&&c&1&&(h=!0,k.vector=v[0].rVector,A(()=>h=!1)),_.$set(k);const S={};!o&&c&1&&(o=!0,S.vector=v[0].sVector,A(()=>o=!1)),l.$set(S)},i(v){V||(w(t.$$.fragment,v),w(_.$$.fragment,v),w(l.$$.fragment,v),V=!0)},o(v){E(t.$$.fragment,v),E(_.$$.fragment,v),E(l.$$.fragment,v),V=!1},d(v){v&&y(e),B(t),B(_),B(l)}}}function ee(n){let e,t,i,a,s,r,p,_,h,P,g,L,u,l,o,V,D,T,G,x,C,q,v;return{c(){e=$("div"),t=$("input"),a=z(),s=$("div"),r=F("x +"),p=z(),_=$("input"),P=z(),g=$("div"),L=F("y +"),u=z(),l=$("input"),V=z(),D=$("div"),T=F("z ="),G=z(),x=$("input"),this.h()},l(c){e=b(c,"DIV",{class:!0});var f=N(e);t=b(f,"INPUT",{type:!0,class:!0}),a=I(f),s=b(f,"DIV",{class:!0});var k=N(s);r=K(k,"x +"),k.forEach(y),p=I(f),_=b(f,"INPUT",{type:!0,class:!0}),P=I(f),g=b(f,"DIV",{class:!0});var S=N(g);L=K(S,"y +"),S.forEach(y),u=I(f),l=b(f,"INPUT",{type:!0,class:!0}),V=I(f),D=b(f,"DIV",{class:!0});var W=N(D);T=K(W,"z ="),W.forEach(y),G=I(f),x=b(f,"INPUT",{type:!0,class:!0}),f.forEach(y),this.h()},h(){d(t,"type","number"),t.value=i=n[2].x,d(t,"class","svelte-1x3x17s"),d(s,"class","text-sm svelte-1x3x17s"),d(_,"type","number"),_.value=h=n[2].y,d(_,"class","svelte-1x3x17s"),d(g,"class","text-sm svelte-1x3x17s"),d(l,"type","number"),l.value=o=n[2].z,d(l,"class","svelte-1x3x17s"),d(D,"class","text-sm svelte-1x3x17s"),d(x,"type","number"),x.value=C=n[2].result,d(x,"class","svelte-1x3x17s"),d(e,"class","geo-layer svelte-1x3x17s")},m(c,f){M(c,e,f),m(e,t),m(e,a),m(e,s),m(s,r),m(e,p),m(e,_),m(e,P),m(e,g),m(g,L),m(e,u),m(e,l),m(e,V),m(e,D),m(D,T),m(e,G),m(e,x),q||(v=[O(t,"change",n[7]),O(_,"change",n[8]),O(l,"change",n[9]),O(x,"change",n[10])],q=!0)},p(c,f){f&4&&i!==(i=c[2].x)&&t.value!==i&&(t.value=i),f&4&&h!==(h=c[2].y)&&_.value!==h&&(_.value=h),f&4&&o!==(o=c[2].z)&&l.value!==o&&(l.value=o),f&4&&C!==(C=c[2].result)&&x.value!==C&&(x.value=C)},d(c){c&&y(e),q=!1,se(v)}}}function fe(n){let e,t,i,a=n[1]==="parameter"&&Y(n),s=n[1]==="coordinate"&&ee(n);return{c(){a&&a.c(),e=z(),s&&s.c(),t=X()},l(r){a&&a.l(r),e=I(r),s&&s.l(r),t=X()},m(r,p){a&&a.m(r,p),M(r,e,p),s&&s.m(r,p),M(r,t,p),i=!0},p(r,[p]){r[1]==="parameter"?a?(a.p(r,p),p&2&&w(a,1)):(a=Y(r),a.c(),w(a,1),a.m(e.parentNode,e)):a&&(oe(),E(a,1,1,()=>{a=null}),ie()),r[1]==="coordinate"?s?s.p(r,p):(s=ee(r),s.c(),s.m(t.parentNode,t)):s&&(s.d(1),s=null)},i(r){i||(w(a),i=!0)},o(r){E(a),i=!1},d(r){a&&a.d(r),r&&y(e),s&&s.d(r),r&&y(t)}}}function pe(n,e,t){let{type:i}=e,{geoLayerParameter:a}=e;const s=new ce;let r=new Q().getGeoLayerCoordinateDefault();function p(o,V){const D=o.target.value;t(2,r[V]=+D,r),t(0,a=s.fixNaNInfinity(s.convertToParameter(r)))}function _(o){n.$$.not_equal(a.startVector,o)&&(a.startVector=o,t(0,a))}function h(o){n.$$.not_equal(a.rVector,o)&&(a.rVector=o,t(0,a))}function P(o){n.$$.not_equal(a.sVector,o)&&(a.sVector=o,t(0,a))}const g=o=>p(o,"x"),L=o=>p(o,"y"),u=o=>p(o,"z"),l=o=>p(o,"result");return n.$$set=o=>{"type"in o&&t(1,i=o.type),"geoLayerParameter"in o&&t(0,a=o.geoLayerParameter)},[a,i,r,p,_,h,P,g,L,u,l]}class te extends re{constructor(e){super(),ae(this,e,pe,fe,ne,{type:1,geoLayerParameter:0})}}function _e(n){let e,t,i,a,s,r,p,_;function h(u){n[1](u)}let P={type:"parameter"};n[0]!==void 0&&(P.geoLayerParameter=n[0]),i=new te({props:P}),H.push(()=>J(i,"geoLayerParameter",h));function g(u){n[2](u)}let L={type:"coordinate"};return n[0]!==void 0&&(L.geoLayerParameter=n[0]),r=new te({props:L}),H.push(()=>J(r,"geoLayerParameter",g)),{c(){e=$("div"),t=$("div"),U(i.$$.fragment),s=z(),U(r.$$.fragment),this.h()},l(u){e=b(u,"DIV",{class:!0});var l=N(e);t=b(l,"DIV",{class:!0});var o=N(t);j(i.$$.fragment,o),s=I(o),j(r.$$.fragment,o),o.forEach(y),l.forEach(y),this.h()},h(){d(t,"class","container svelte-gfbpd4"),d(e,"class","centered")},m(u,l){M(u,e,l),m(e,t),Z(i,t,null),m(t,s),Z(r,t,null),_=!0},p(u,[l]){const o={};!a&&l&1&&(a=!0,o.geoLayerParameter=u[0],A(()=>a=!1)),i.$set(o);const V={};!p&&l&1&&(p=!0,V.geoLayerParameter=u[0],A(()=>p=!1)),r.$set(V)},i(u){_||(w(i.$$.fragment,u),w(r.$$.fragment,u),_=!0)},o(u){E(i.$$.fragment,u),E(r.$$.fragment,u),_=!1},d(u){u&&y(e),B(i),B(r)}}}function ve(n,e,t){let i=new Q().getGeoLayerParameterDefault();function a(r){i=r,t(0,i)}function s(r){i=r,t(0,i)}return[i,a,s]}class Pe extends re{constructor(e){super(),ae(this,e,ve,_e,ne,{})}}export{Pe as default};
